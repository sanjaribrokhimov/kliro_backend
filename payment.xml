<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="Payment Flow">
    <mxGraphModel dx="1106" dy="647" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- User -->
        <mxCell id="user" value="Пользователь" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F0FE;strokeColor=#2B6CB0;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="40" y="60" width="140" height="60" as="geometry"/>
        </mxCell>

        <!-- Select Products -->
        <mxCell id="select" value="Выбирает продукты:\n• Авиабилеты\n• Отели\n• Страхование (КАСКО/ОСАГО/Travel/ИТКД)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3C4;strokeColor=#B7791F;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="220" y="40" width="260" height="100" as="geometry"/>
        </mxCell>

        <!-- Enter Amount / Pay -->
        <mxCell id="pay" value="Вводит сумму и нажимает оплатить" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F0FFF4;strokeColor=#2F855A;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="520" y="60" width="220" height="60" as="geometry"/>
        </mxCell>

        <!-- Payment System -->
        <mxCell id="ps" value="Система оплаты\n(принимает деньги на счёт)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6E6FA;strokeColor=#6B46C1;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="520" y="170" width="220" height="70" as="geometry"/>
        </mxCell>

        <!-- Split info -->
        <mxCell id="split" value="Распределение суммы:\nN% → Наш счёт\nN% → Счёт партнёра\n(комиссия/перевод)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF0F6;strokeColor=#C026D3;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="520" y="270" width="220" height="80" as="geometry"/>
        </mxCell>

        <!-- Our account -->
        <mxCell id="our" value="Наш счёт" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DCFCE7;strokeColor=#15803D;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="820" y="240" width="160" height="60" as="geometry"/>
        </mxCell>

        <!-- Partner account -->
        <mxCell id="partner" value="Счёт партнёра" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FEF3C7;strokeColor=#B45309;fontSize=12" vertex="1" parent="1">
          <mxGeometry x="820" y="320" width="160" height="60" as="geometry"/>
        </mxCell>

        <!-- Edges -->
        <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;endArrow=block;endFill=1" edge="1" parent="1" source="user" target="select">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;endArrow=block;endFill=1" edge="1" parent="1" source="select" target="pay">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;endArrow=block;endFill=1" edge="1" parent="1" source="pay" target="ps">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#333;endArrow=block;endFill=1" edge="1" parent="1" source="ps" target="split">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e5" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#15803D;endArrow=block;endFill=1" edge="1" parent="1" source="split" target="our">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e6" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#B45309;endArrow=block;endFill=1" edge="1" parent="1" source="split" target="partner">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Optional note: комиссия -->
        <mxCell id="note" value="(Возможно: удержание комиссии платежной системы)" style="text;html=1;align=left;verticalAlign=top;fontSize=11" vertex="1" parent="1">
          <mxGeometry x="520" y="370" width="500" height="40" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
