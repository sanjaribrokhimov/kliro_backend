package utils

import (
	"strings"
)

// TransliterateUzToOz транслитерирует узбекский текст с латиницы в кириллицу
func TransliterateUzToOz(text string) string {
	if text == "" {
		return ""
	}

	// Словарь транслитерации узбекской латиницы в кириллицу
	transliterationMap := map[string]string{
		// Буквы
		"A": "А", "a": "а",
		"B": "Б", "b": "б",
		"D": "Д", "d": "д",
		"E": "Е", "e": "е",
		"F": "Ф", "f": "ф",
		"G": "Г", "g": "г",
		"H": "Ҳ", "h": "ҳ",
		"I": "И", "i": "и",
		"J": "Ж", "j": "ж",
		"K": "К", "k": "к",
		"L": "Л", "l": "л",
		"M": "М", "m": "м",
		"N": "Н", "n": "н",
		"O": "О", "o": "о",
		"P": "П", "p": "п",
		"Q": "Қ", "q": "қ",
		"R": "Р", "r": "р",
		"S": "С", "s": "с",
		"T": "Т", "t": "т",
		"U": "У", "u": "у",
		"V": "В", "v": "в",
		"X": "Х", "x": "х",
		"Y": "Й", "y": "й",
		"Z": "З", "z": "з",
		"O'": "Ў", "o'": "ў", "O`": "Ў", "o`": "ў",
		"G'": "Ғ", "g'": "ғ", "G`": "Ғ", "g`": "ғ",
		"Sh": "Ш", "sh": "ш", "SH": "Ш",
		"Ch": "Ч", "ch": "ч", "CH": "Ч",
		"Ng": "Нг", "ng": "нг", "NG": "НГ",
	}

	result := text

	// Сначала обрабатываем двухсимвольные комбинации (O', G', Sh, Ch, Ng)
	// Важно: порядок имеет значение - сначала длинные комбинации
	replacements := []struct {
		from string
		to   string
	}{
		{"O'", "Ў"}, {"o'", "ў"},
		{"O`", "Ў"}, {"o`", "ў"},
		{"G'", "Ғ"}, {"g'", "ғ"},
		{"G`", "Ғ"}, {"g`", "ғ"},
		{"SH", "Ш"}, {"Sh", "Ш"}, {"sh", "ш"},
		{"CH", "Ч"}, {"Ch", "Ч"}, {"ch", "ч"},
		{"NG", "НГ"}, {"Ng", "Нг"}, {"ng", "нг"},
	}

	for _, r := range replacements {
		result = strings.ReplaceAll(result, r.from, r.to)
	}

	// Затем обрабатываем одиночные символы
	for from, to := range transliterationMap {
		// Пропускаем уже обработанные двухсимвольные
		if len(from) == 1 {
			result = strings.ReplaceAll(result, from, to)
		}
	}

	return result
}

// TransliterateRuToOz конвертирует русский текст в кириллицу узбекского (oz)
// В основном просто возвращает текст, так как русский уже в кириллице
// Но может адаптировать некоторые специфичные слова
func TransliterateRuToOz(text string) string {
	if text == "" {
		return ""
	}
	
	// Русский текст уже в кириллице, но нужно адаптировать некоторые слова
	// Например, "онлайн" -> "онлайн" (остается как есть)
	// "кредит" -> "кредит" (остается как есть)
	
	// Просто возвращаем текст, так как кириллица совместима
	// Можно добавить специальные замены если нужно
	return text
}
