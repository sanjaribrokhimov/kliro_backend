{
	"info": {
		"_postman_id": "trust-accident-api-collection",
		"name": "Trust Accident Insurance API",
		"description": "API –¥–ª—è —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –æ—Ç –Ω–µ—Å—á–∞—Å—Ç–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (Trust Insurance)\n\n## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\nAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Basic Auth —Å credentials –∏–∑ .env:\n- TRUST_LOGIN\n- TRUST_PASSWORD\n\n## üìã –ü—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏:\n1. GET /tarifs - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤\n2. POST /create - —Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –∏ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É\n3. POST /check-payment - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–∏—Å\n\n## üìä –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª–∏—Å–∞ (status_policy):\n- 2 - –í–´–î–ê–ù (—É—Å–ø–µ—à–Ω–æ)\n- 3 - –ë–†–ê–ö–û–í–ê–ù\n- 4 - –£–¢–ï–†–Ø–ù\n- 8 - –†–ê–°–¢–û–†–ì–ù–£–¢\n\n## üí≥ –°—Ç–∞—Ç—É—Å—ã –æ–ø–ª–∞—Ç—ã (status_payment):\n- 1 - –ù–ï–û–ü–õ–ê–ß–ï–ù–ù–´–ô\n- 2 - –û–ü–õ–ê–ß–ï–ù–ù–´–ô\n\n## üí∞ –¢–∏–ø—ã –æ–ø–ª–∞—Ç—ã (payment_type):\n- 3 - –î–ï–ù–¨–ì–ò –£ –ê–ì–ï–ù–¢–ê\n- 8 - PayMe\n- 9 - Click\n- 10 - Paynet",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Get Tariffs",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/trust-insurance/accident/tarifs",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"trust-insurance",
						"accident",
						"tarifs"
					]
				},
				"description": "–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ –¥–ª—è —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –æ—Ç –Ω–µ—Å—á–∞—Å—Ç–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤.\n\n**–®–∞–≥ 1:** –í—ã–∑–æ–≤–∏—Ç–µ —ç—Ç–æ—Ç endpoint —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤.\n\n**–¢–∞—Ä–∏—Ñ—ã:**\n- id: ID —Ç–∞—Ä–∏—Ñ–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏)\n- insurance_premium: —Å—Ç—Ä–∞—Ö–æ–≤–∞—è –ø—Ä–µ–º–∏—è (—Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –≤ —Å—É–º)\n- insurance_otv: —Å—Ç—Ä–∞—Ö–æ–≤–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å (—Å—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã –ø—Ä–∏ —Å—Ç—Ä–∞—Ö–æ–≤–æ–º —Å–ª—É—á–∞–µ)"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/trust-insurance/accident/tarifs",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"trust-insurance",
								"accident",
								"tarifs"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [],
					"cookie": [],
					"body": "{\n  \"result\": {\n    \"result\": 0,\n    \"result_message\": \"Successful\",\n    \"tariffs\": [\n      {\n        \"id\": 1,\n        \"insurance_premium\": 3000000,\n        \"insurance_otv\": 15000\n      },\n      {\n        \"id\": 2,\n        \"insurance_premium\": 4000000,\n        \"insurance_otv\": 20000\n      },\n      {\n        \"id\": 3,\n        \"insurance_premium\": 5000000,\n        \"insurance_otv\": 25000\n      },\n      {\n        \"id\": 4,\n        \"insurance_premium\": 6000000,\n        \"insurance_otv\": 30000\n      },\n      {\n        \"id\": 5,\n        \"insurance_premium\": 7000000,\n        \"insurance_otv\": 35000\n      },\n      {\n        \"id\": 6,\n        \"insurance_premium\": 8000000,\n        \"insurance_otv\": 40000\n      },\n      {\n        \"id\": 7,\n        \"insurance_premium\": 9000000,\n        \"insurance_otv\": 45000\n      },\n      {\n        \"id\": 8,\n        \"insurance_premium\": 10000000,\n        \"insurance_otv\": 50000\n      },\n      {\n        \"id\": 10,\n        \"insurance_premium\": 2000000,\n        \"insurance_otv\": 10000\n      },\n      {\n        \"id\": 11,\n        \"insurance_premium\": 25000000,\n        \"insurance_otv\": 100000\n      },\n      {\n        \"id\": 12,\n        \"insurance_premium\": 35000000,\n        \"insurance_otv\": 150000\n      },\n      {\n        \"id\": 13,\n        \"insurance_premium\": 62500000,\n        \"insurance_otv\": 250000\n      },\n      {\n        \"id\": 14,\n        \"insurance_premium\": 75000000,\n        \"insurance_otv\": 300000\n      }\n    ]\n  }\n}"
				}
			]
		},
		{
			"name": "2. Create Insurance Application",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"start_date\": \"2024-11-10\",\n  \"tariff_id\": 1,\n  \"person\": {\n    \"pinfl\": \"30101995750028\",\n    \"pass_sery\": \"AB\",\n    \"pass_num\": \"0160608\",\n    \"date_birth\": \"1999-01-01\",\n    \"last_name\": \"Rasulov\",\n    \"first_name\": \"Bunyod\",\n    \"patronym_name\": \"Ravshan o`g`li\",\n    \"oblast\": 10,\n    \"rayon\": 1012,\n    \"phone\": \"998123456789\",\n    \"address\": \"Tashkent, Yunusabad district\"\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/trust-insurance/accident/create",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"trust-insurance",
						"accident",
						"create"
					]
				},
				"description": "–°–æ–∑–¥–∞–µ—Ç –∑–∞—è–≤–∫—É –Ω–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –æ—Ç –Ω–µ—Å—á–∞—Å—Ç–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã.\n\n**–®–∞–≥ 2:** –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–æ–≤, –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∞—Ä–∏—Ñ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É.\n\n**Request Parameters:**\n- start_date: –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è (YYYY-MM-DD)\n- tariff_id: ID —Ç–∞—Ä–∏—Ñ–∞ –∏–∑ GET /tarifs\n- person: –î–∞–Ω–Ω—ã–µ –∑–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–∏—Ü–∞\n  - pinfl: –ü–ò–ù–§–õ (14 —Ü–∏—Ñ—Ä)\n  - pass_sery: –°–µ—Ä–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞ (2 –±—É–∫–≤—ã)\n  - pass_num: –ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞\n  - date_birth: –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (YYYY-MM-DD)\n  - last_name: –§–∞–º–∏–ª–∏—è\n  - first_name: –ò–º—è\n  - patronym_name: –û—Ç—á–µ—Å—Ç–≤–æ\n  - oblast: ID –æ–±–ª–∞—Å—Ç–∏\n  - rayon: ID —Ä–∞–π–æ–Ω–∞\n  - phone: –¢–µ–ª–µ—Ñ–æ–Ω (998XXXXXXXXX)\n  - address: –ê–¥—Ä–µ—Å\n\n**Response:**\n–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç anketa_id (ID –∑–∞—è–≤–∫–∏) –∏ —Å—Å—ã–ª–∫–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Click –∏ Payme.\n\n**Important:**\n–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ anketa_id - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã."
			},
			"response": [
				{
					"name": "Success Response with Payment URLs",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_date\": \"2024-11-10\",\n  \"tariff_id\": 1,\n  \"person\": {\n    \"pinfl\": \"30101995750028\",\n    \"pass_sery\": \"AB\",\n    \"pass_num\": \"0160608\",\n    \"date_birth\": \"1999-01-01\",\n    \"last_name\": \"Rasulov\",\n    \"first_name\": \"Bunyod\",\n    \"patronym_name\": \"Ravshan o`g`li\",\n    \"oblast\": 10,\n    \"rayon\": 1012,\n    \"phone\": \"998123456789\",\n    \"address\": \"Tashkent, Yunusabad district\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/trust-insurance/accident/create",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"trust-insurance",
								"accident",
								"create"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [],
					"cookie": [],
					"body": "{\n  \"result\": {\n    \"result\": 0,\n    \"result_message\": \"Successful request processing\",\n    \"anketa_id\": 46622,\n    \"insurance_premium\": 3000000,\n    \"insurance_otv\": 15000,\n    \"payment_urls\": {\n      \"click\": \"https://my.click.uz/services/pay?service_id=23572&merchant_id=14417&amount=3000000&transaction_param=46622&return_url=https://kliro.uz/payment/return\",\n      \"payme\": \"https://checkout.paycom.uz/bT02NDZjOGJmZjJjYjgzOTM3YTc1NTFjOTU7YWMub3JkZXJfaWQ9NDY2MjI7YT0zMDAwMDAwMDA=\"\n    }\n  }\n}"
				},
				{
					"name": "Error - Validation Failed",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"start_date\": \"2024-11-10\",\n  \"tariff_id\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/trust-insurance/accident/create",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"trust-insurance",
								"accident",
								"create"
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [],
					"cookie": [],
					"body": "{\n  \"error\": \"Key: 'CreateRequest.Person' Error:Field validation for 'Person' failed on the 'required' tag\"\n}"
				}
			]
		},
		{
			"name": "3. Check Payment Status",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"anketa_id\": 46622,\n  \"lan\": \"uz\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/trust-insurance/accident/check-payment",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"trust-insurance",
						"accident",
						"check-payment"
					]
				},
				"description": "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã –∑–∞—è–≤–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª–∏—Å–µ.\n\n**–®–∞–≥ 3:** –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã (–∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏) –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏.\n\n**Request Parameters:**\n- anketa_id: ID –∑–∞—è–≤–∫–∏ –∏–∑ POST /create\n- lan: –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (uz, ru, en)\n\n**Response Fields:**\n- result: –ö–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (0 = —É—Å–ø–µ—à–Ω–æ)\n- result_message: –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ\n- policy_id: ID –ø–æ–ª–∏—Å–∞\n- policy_sery: –°–µ—Ä–∏—è —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –ø–æ–ª–∏—Å–∞\n- policy_number: –ù–æ–º–µ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –ø–æ–ª–∏—Å–∞\n- status_policy: –°—Ç–∞—Ç—É—Å –ø–æ–ª–∏—Å–∞\n  - 2 = –í–´–î–ê–ù (—É—Å–ø–µ—à–Ω–æ)\n  - 3 = –ë–†–ê–ö–û–í–ê–ù\n  - 4 = –£–¢–ï–†–Ø–ù\n  - 8 = –†–ê–°–¢–û–†–ì–ù–£–¢\n- status_payment: –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã\n  - 1 = –ù–ï–û–ü–õ–ê–ß–ï–ù–ù–´–ô\n  - 2 = –û–ü–õ–ê–ß–ï–ù–ù–´–ô\n- payment_type: –¢–∏–ø –æ–ø–ª–∞—Ç—ã\n  - 3 = –î–ï–ù–¨–ì–ò –£ –ê–ì–ï–ù–¢–ê\n  - 8 = PayMe\n  - 9 = Click\n  - 10 = Paynet\n- url: –°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø–æ–ª–∏—Å–∞\n- url_napp: –°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø–æ–ª–∏—Å–∞ NAPP\n\n**Important:**\n–ö–æ–≥–¥–∞ status_policy = 2 –∏ status_payment = 2, –ø–æ–ª–∏—Å –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é."
			},
			"response": [
				{
					"name": "Success - Policy Issued and Paid",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"anketa_id\": 46622,\n  \"lan\": \"uz\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/trust-insurance/accident/check-payment",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"trust-insurance",
								"accident",
								"check-payment"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [],
					"cookie": [],
					"body": "{\n  \"result\": {\n    \"result\": 0,\n    \"result_message\": \"Successful request processing\",\n    \"policy_id\": \"8966133\",\n    \"policy_sery\": \"NS\",\n    \"policy_number\": 4213,\n    \"status_policy\": \"2\",\n    \"url\": \"http://api.online-trust.uz/users/policy/download/8966133\",\n    \"url_napp\": \"https://ersp.e-osgo.uz/site/export-to-pdf?id=UUIDPOLISA\",\n    \"status_payment\": \"2\",\n    \"payment_type\": \"9\"\n  }\n}"
				},
				{
					"name": "Status - Not Paid Yet",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"anketa_id\": 46622,\n  \"lan\": \"uz\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/trust-insurance/accident/check-payment",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"trust-insurance",
								"accident",
								"check-payment"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [],
					"cookie": [],
					"body": "{\n  \"result\": {\n    \"result\": 0,\n    \"result_message\": \"Successful request processing\",\n    \"policy_id\": \"\",\n    \"policy_sery\": \"\",\n    \"policy_number\": 0,\n    \"status_policy\": \"\",\n    \"url\": \"\",\n    \"url_napp\": \"\",\n    \"status_payment\": \"1\",\n    \"payment_type\": \"\"\n  }\n}"
				},
				{
					"name": "Error - Invalid Anketa ID",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"anketa_id\": 999999,\n  \"lan\": \"uz\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/trust-insurance/accident/check-payment",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"trust-insurance",
								"accident",
								"check-payment"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [],
					"cookie": [],
					"body": "{\n  \"result\": {\n    \"result\": 1,\n    \"result_message\": \"Anketa not found\",\n    \"policy_id\": \"\",\n    \"policy_sery\": \"\",\n    \"policy_number\": 0,\n    \"status_policy\": \"\",\n    \"url\": \"\",\n    \"url_napp\": \"\",\n    \"status_payment\": \"\",\n    \"payment_type\": \"\"\n  }\n}"
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		}
	]
}

